# Vite 技術解説書 (Vite Overview)

## 1. Vite (ヴィート) とは？

**Vite**（フランス語で「速い」の意味）は、現代のWeb開発において主流となっている **ビルドツール（開発環境構築ツール）** です。
ReactやVueなどのフレームワークを使った開発を、驚くほど高速かつ快適にするために作られました。

### なぜ必要なのか？
ブラウザは、開発者が書いた高度なプログラム（TypeScriptやJSXなど）をそのまま理解することができません。
そのため、ブラウザが理解できる形式（標準的なJavaScript, CSS, HTML）に変換・翻訳する作業が必要です。この作業を行うのが「ビルドツール」であり、Viteはその一種です。

## 2. 従来のツール (Webpack) との違い

これまでは **Webpack** というツールが標準でしたが、大規模なアプリになると「起動に数分かかる」「変更反映に数秒待たされる」という遅さが問題になっていました。

| 特徴 | Webpack (従来) | Vite (現在) |
| :--- | :--- | :--- |
| **仕組み** | 全てのファイルを最初にまとめて変換（バンドル）してからサーバーを起動する。 | **必要になったファイルだけ** をその都度ブラウザに送る（Native ESM）。 |
| **起動速度** | 遅い（プロジェクトが大きくなると数分かかることも）。 | **爆速**（規模に関わらず数百ミリ秒〜数秒）。 |
| **更新速度** | 遅い（一部を変えても全体を作り直す処理が走るため）。 | **一瞬**（変更したファイルだけを差し替える HMR が超高速）。 |

**例え:**
*   **Webpack:** 辞書を作る際、全ての単語を編集し終えてから印刷して渡す方式。修正があるたびに全ページ印刷し直すので遅い。
*   **Vite:** 辞書の必要なページだけをコピーして渡す方式。修正があってもその1枚を差し替えるだけなので速い。

## 3. Vite が提供する主な機能

1.  **開発サーバー (Dev Server):**
    *   `npm run dev` で起動するもの。コードを保存すると瞬時にブラウザが更新されます。
2.  **ビルドコマンド (Build Command):**
    *   `npm run build` で実行するもの。本番公開用にファイルを最適化（圧縮・軽量化）して出力します。
3.  **プラグインシステム:**
    *   React, Vue, TypeScript などを扱うための機能をプラグインとして簡単に追加できます。

## 4. テストツール (Vitest) との関係

Viteのエコシステムには、**Vitest** というテストツールがあります。

*   **Vite と同じ設定を共有できる:**
    Webpackの時代は、アプリの設定とテストの設定（Jestの設定）を別々に書く必要があり、ズレが生じてエラーになることが多々ありました。
    VitestはViteの設定（`vite.config.ts`）をそのまま読み込むため、**「アプリで動くならテストでも動く」** 状態が簡単に作れます。
*   **高速:**
    Viteの高速な仕組みを利用してテストを実行するため、テスト結果が出るのも非常に速いです。

## 結論: BodyAnalyst における Vite

現在のプロジェクトはすでに Vite で構築されています（`package.json` や `vite.config.ts` が存在します）。
これにより、開発中の待ち時間が最小限になり、Vitest を導入することでテスト環境構築のコストも大幅に下げることができます。
ユーザー（開発者）はツールの複雑な設定に悩まされることなく、アプリのロジックや機能実装に集中できます。
