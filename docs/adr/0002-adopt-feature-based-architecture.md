# ADR 0002: 機能ベースアーキテクチャ (Feature-Based Architecture) の採用

## ステータス
承認済み

## コンテキスト
本アプリケーション「BodyAnalyst」のアーキテクチャを選定するにあたり、以下の特性を考慮する必要があった。

1.  **データ構造の単純性:** データは単一のデータストア（Google Sheets）に格納され、テーブル間の複雑なリレーションや相互作用は少ない。
2.  **制御ロジックの単純性:** バックエンドロジックの大部分は基本的なCRUD操作であり、複雑なステートマシンやワークフロー制御を持たない。
3.  **UI/UXへの集中:** アプリケーションの複雑性は、データ処理そのものではなく、画面ごとの機能（ワークアウト記録、食事管理）や「可視化エンジン」によるデータ表現に集中している。
4.  **可視化エンジンの独立性:** 最大のビジネスロジックである「可視化エンジン」は、他の機能と密結合せず独立して動作する。

## 決定
ソースコードの構成方針として、技術的な役割（Components, Hooks, Utilsなど）で分割するレイヤードアーキテクチャではなく、**機能単位で分割する「機能ベースアーキテクチャ (Feature-Based Architecture)」**を採用する。

具体的には、`src/features/` ディレクトリ配下にドメイン機能（`workout`, `meal`, `dashboard` 等）ごとのフォルダを作成し、関連するコンポーネント、ロジック、状態管理をそこに集約（コロケーション）させる。

## 決定の根拠
*   **凝集度の向上:** 関連するコードが近くにあるため、特定機能の開発や修正を行う際にディレクトリを行き来する必要がなくなり、認知負荷が下がる。
*   **スケーラビリティ:** 新しい機能を追加する際は、新たなFeatureディレクトリを作成するだけでよく、既存コードへの影響を最小限に抑えられる。
*   **複雑性の局所化:** アプリケーションの複雑性が画面（機能）に集中しているため、その単位でモジュール化することが理に適っている。

## 備考
共通利用される汎用的なUIコンポーネントやインフラ層（APIクライアント等）については、例外的に `src/components/common` や `src/db` 等に配置し、Feature間でのコード重複を防ぐ。
